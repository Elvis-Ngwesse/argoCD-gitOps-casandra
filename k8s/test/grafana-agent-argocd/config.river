metrics {
  global {
    scrape_interval = "60s"
    remote_write {
      url = "http://prometheus.logging.svc.cluster.local:9090/api/v1/write"
    }
  }
  configs {
    name = "default"
    scrape_configs {
      job_name = "kubernetes-pods"
      kubernetes_sd_configs {
        role = "pod"
      }
      relabel_configs {
        source_labels = ["__meta_kubernetes_pod_label_app"]
        action = "keep"
        regex = "your-app-name"
      }
    }
  }
}

logs {
  configs {
    name = "default"
    clients {
      url = "http://loki.logging.svc.cluster.local:3100/loki/api/v1/push"
    }
    positions {
      filename = "/tmp/positions.yaml"
    }
    scrape_configs {
      job_name = "varlogs"
      static_configs {
        targets = ["localhost"]
        labels = {
          job = "varlogs"
          __path__ = "/var/log/*log"
        }
      }
    }
  }
}

logging {
  level = "info"
  format = "logfmt"
}
